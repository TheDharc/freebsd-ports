--- CMakeLists.txt.orig	2015-05-03 15:07:03 UTC
+++ CMakeLists.txt
@@ -27,10 +27,14 @@ set_package_properties(FAM PROPERTIES

 set(HAVE_FAM ${FAM_FOUND})

-include(CheckIncludeFiles)
-check_include_files(sys/inotify.h SYS_INOTIFY_H_FOUND)
-set(HAVE_SYS_INOTIFY_H ${SYS_INOTIFY_H_FOUND})
+# Find libinotify
+find_package(Libinotify)
+set_package_properties(Libinotify PROPERTIES
+     PURPOSE "Filesystem alteration notifications using inotify")

+set(HAVE_SYS_INOTIFY_H ${LIBINOTIFY_FOUND})
+
+include(CheckIncludeFiles)

 # Generate io/config-kdirwatch.h
 configure_file(src/lib/io/config-kdirwatch.h.cmake ${CMAKE_CURRENT_BINARY_DIR}/src/lib/io/config-kdirwatch.h)
